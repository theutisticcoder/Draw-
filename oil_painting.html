<!DOCTYPE html>
<html>
<head>
    <title>Oil Painting Studio</title>
    <style>
        body {
            background: #2c3e50;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .container {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .controls {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            width: 250px;
        }
        .color-palette {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid white;
            cursor: pointer;
        }
        .color-swatch.active {
            border-color: #f39c12;
        }
        .slider-group {
            margin-bottom: 15px;
        }
        .slider-group label {
            display: block;
            margin-bottom: 5px;
        }
        .slider {
            width: 100%;
        }
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        #canvas {
            border: 2px solid white;
            border-radius: 10px;
            cursor: crosshair;
            background: white;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸŽ¨ Oil Painting Studio</h1>
    </div>
    
    <div class="container">
        <div class="controls">
            <h3>Colors</h3>
            <div class="color-palette">
                <div class="color-swatch active" style="background: #e74c3c;" data-color="#e74c3c"></div>
                <div class="color-swatch" style="background: #3498db;" data-color="#3498db"></div>
                <div class="color-swatch" style="background: #2ecc71;" data-color="#2ecc71"></div>
                <div class="color-swatch" style="background: #f39c12;" data-color="#f39c12"></div>
                <div class="color-swatch" style="background: #9b59b6;" data-color="#9b59b6"></div>
                <div class="color-swatch" style="background: #1abc9c;" data-color="#1abc9c"></div>
                <div class="color-swatch" style="background: #e67e22;" data-color="#e67e22"></div>
                <div class="color-swatch" style="background: #34495e;" data-color="#34495e"></div>
            </div>
            
            <h3>Brush Size</h3>
            <div class="slider-group">
                <label>Size: <span id="sizeValue">20</span>px</label>
                <input type="range" id="brushSize" class="slider" min="1" max="50" value="20">
            </div>
            
            <h3>Tools</h3>
            <button class="btn" id="clearBtn">Clear</button>
            <button class="btn" id="saveBtn">Save</button>
            <button class="btn" id="undoBtn">Undo</button>
        </div>
        
        <canvas id="canvas" width="800" height="600"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        let currentColor = '#e74c3c';
        let brushSize = 20;
        let history = [];
        let historyIndex = -1;

        // Initialize canvas
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';

        // Mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            lastX = e.clientX - rect.left;
            lastY = e.clientY - rect.top;
        }

        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const currentX = e.clientX - rect.left;
            const currentY = e.clientY - rect.top;
            
            ctx.strokeStyle = currentColor;
            ctx.lineWidth = brushSize;
            ctx.globalAlpha = 0.8;
            
            // Create realistic brush stroke
            createBrushStroke(lastX, lastY, currentX, currentY);
            
            lastX = currentX;
            lastY = currentY;
        }

        function createBrushStroke(x1, y1, x2, y2) {
            const distance = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
            const steps = Math.max(Math.floor(distance / 2), 1);
            
            for (let i = 0; i <= steps; i++) {
                const t = i / steps;
                const x = x1 + (x2 - x1) * t;
                const y = y1 + (y2 - y1) * t;
                
                // Add texture
                const noiseX = (Math.random() - 0.5) * 5;
                const noiseY = (Math.random() - 0.5) * 5;
                
                // Create brush tip
                const brushRadius = brushSize / 2;
                const gradient = ctx.createRadialGradient(
                    x + noiseX, y + noiseY, 0,
                    x + noiseX, y + noiseY, brushRadius
                );
                
                gradient.addColorStop(0, currentColor);
                gradient.addColorStop(0.7, currentColor);
                gradient.addColorStop(1, 'transparent');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(x + noiseX, y + noiseY, brushRadius, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function stopDrawing() {
            if (isDrawing) {
                isDrawing = false;
                saveState();
            }
        }

        function saveState() {
            history = history.slice(0, historyIndex + 1);
            history.push(canvas.toDataURL());
            historyIndex++;
            
            if (history.length > 50) {
                history.shift();
                historyIndex--;
            }
        }

        // Color swatches
        document.querySelectorAll('.color-swatch').forEach(swatch => {
            swatch.addEventListener('click', (e) => {
                document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
                e.target.classList.add('active');
                currentColor = e.target.dataset.color;
            });
        });

        // Brush size
        document.getElementById('brushSize').addEventListener('input', (e) => {
            brushSize = parseInt(e.target.value);
            document.getElementById('sizeValue').textContent = brushSize;
        });

        // Tool buttons
        document.getElementById('clearBtn').addEventListener('click', () => {
            if (confirm('Clear the canvas?')) {
                ctx.fillStyle = 'white';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                saveState();
            }
        });

        document.getElementById('saveBtn').addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = 'oil-painting.png';
            link.href = canvas.toDataURL();
            link.click();
        });

        document.getElementById('undoBtn').addEventListener('click', () => {
            if (historyIndex > 0) {
                historyIndex--;
                const img = new Image();
                img.onload = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0);
                };
                img.src = history[historyIndex];
            }
        });

        // Initial state
        saveState();
    </script>
</body>
</html>
